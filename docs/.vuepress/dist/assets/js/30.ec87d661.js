(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{400:function(t,e,a){"use strict";a.r(e);var v=a(25),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"浏览器的缓存策略"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的缓存策略"}},[t._v("#")]),t._v(" 浏览器的缓存策略")]),t._v(" "),a("h2",{attrs:{id:"http缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http缓存"}},[t._v("#")]),t._v(" http缓存")]),t._v(" "),a("p",[t._v("缓存是一种保存资源副本并在下次请求时直接使用该副本的技术。")]),t._v(" "),a("h2",{attrs:{id:"强制缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#强制缓存"}},[t._v("#")]),t._v(" 强制缓存")]),t._v(" "),a("ol",[a("li",[t._v("先向内存或者硬盘中查找是否有对应的文件，找到后根据expire(绝对时间)判断是够过期，")]),t._v(" "),a("li",[t._v("Expires是http1.0的产物，后面增加了cache-control字段判断是够过期。")])]),t._v(" "),a("p",[t._v("cache-control")]),t._v(" "),a("ul",[a("li",[t._v("public    表明响应可以被任何对象缓存")]),t._v(" "),a("li",[t._v("private  表明响应只能被单个用户缓存，不能作为共享缓存")]),t._v(" "),a("li",[t._v("no-cache 不使用强制缓存")]),t._v(" "),a("li",[t._v("no-store 不使用任何缓存")]),t._v(" "),a("li",[t._v("max-age  设置缓存存储的最大周期")]),t._v(" "),a("li",[t._v("must-revalidate")])]),t._v(" "),a("p",[t._v("禁止所有缓存 cache-control: no-store"),a("br"),t._v("\n需要重新验证（协商缓存）Cache-Control: no-cache  ；   Cache-Control: max-age=0")]),t._v(" "),a("p",[t._v("以上为强制缓存，如果没有命中，则走协商缓存")]),t._v(" "),a("h2",{attrs:{id:"协商缓存"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[t._v("#")]),t._v(" 协商缓存")]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("先向服务器发送请求，headers携带"),a("code",[t._v("If-Modified-Since")]),t._v(" 匹配文件时间  然后服务器返回headers最新"),a("code",[t._v("Last-Modified")])]),t._v(" "),a("li",[t._v("根据请求headers "),a("code",[t._v("if-none-match")]),t._v("字段  服务端计算"),a("code",[t._v("etag")]),t._v("来判断文件内容是否变化 响应header设置新的"),a("code",[t._v("etag")])]),t._v(" "),a("li",[t._v("如果以上命中就采用缓存 返回状态码304(Not Modified 重定向) 浏览器从缓存中读取文件")]),t._v(" "),a("li",[t._v("否则就返回新的文件")])]),t._v(" "),a("blockquote",[a("p",[t._v("优先级"),a("br"),t._v("\nif-none-match/Etag > If-Modified-Since/Last-Modified"),a("br"),t._v("\n因为即使etag没有改变（内容不变），即使时间变化了那么不应该重新下载资源")])]),t._v(" "),a("p",[t._v("问题："),a("br"),t._v("\nETags Last-Modified的区别"),a("br"),t._v("\npublic private的区别")])])}),[],!1,null,null,null);e.default=_.exports}}]);